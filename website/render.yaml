# Render Blueprint - OpenDraft Website
# https://render.com/docs/blueprint-spec
# Migrated from Vercel to Render

services:
  # Next.js Web Application (Standalone Build)
  - type: web
    name: opendraft-website
    runtime: node
    region: frankfurt # EU region for better latency
    plan: starter # free, starter, standard, pro
    rootDir: website
    buildCommand: npm ci && npm run build
    startCommand: npm start
    envVars:
      # Node environment
      - key: NODE_VERSION
        value: "20"
      - key: NODE_ENV
        value: production
      - key: PORT
        value: "10000"
      - key: HOSTNAME
        value: "0.0.0.0"
      
      # Supabase Configuration
      - key: NEXT_PUBLIC_SUPABASE_URL
        sync: false # Set in Render dashboard
      - key: NEXT_PUBLIC_SUPABASE_ANON_KEY
        sync: false
      - key: SUPABASE_SERVICE_ROLE_KEY
        sync: false
      
      # Resend Email API
      - key: RESEND_API_KEY
        sync: false
      
      # Cloudflare Turnstile (Anti-spam)
      - key: NEXT_PUBLIC_TURNSTILE_SITE_KEY
        sync: false
      - key: TURNSTILE_SECRET_KEY
        sync: false
      
      # Application URLs
      - key: NEXT_PUBLIC_BASE_URL
        sync: false # Set to your custom domain
      
      # Waitlist Configuration
      - key: NEXT_PUBLIC_DAILY_THESIS_LIMIT
        value: "100"
      - key: NEXT_PUBLIC_REFERRAL_REWARD
        value: "20"
      - key: NEXT_PUBLIC_REFERRALS_REQUIRED
        value: "1"
    
    healthCheckPath: /
    autoDeploy: true

